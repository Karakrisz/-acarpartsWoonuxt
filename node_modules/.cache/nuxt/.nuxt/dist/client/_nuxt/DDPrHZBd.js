import{d as R,$ as U,ac as B,o as t,h as k,w as v,c as m,a as n,n as S,g as I,N as j,z as H,O as z,y as A,K as d,s as G,e as o,t as l,f as w,b as c,L as N,i as b,T as K,j as D,k as O,p as q}from"./B33GKiR2.js";import{_ as W}from"./D0ncmh0y.js";const F={key:1,class:"flex items-center gap-2 text-lg font-bold"},V="/img/svg/SVG_Logo.svg",J="/img/svg/SVG_Logo.svg",Q=R({__name:"Logo",setup(P){return U(),B(),(a,i)=>{const r=S,x=I;return t(),k(x,{to:"/"},{default:v(()=>[V?(t(),m("img",{key:0,src:V,alt:"Logo",class:"object-contain h-10"})):(t(),m("div",F,[n(r,{src:J,alt:"Logo",width:"100",height:"32"})]))]),_:1})}}}),X={class:"max-w-lg mx-auto my-16 min-h-[600px] lg:my-24"},Y={class:"flex flex-col items-center"},Z={class:"text-xl font-semibold lg:text-3xl"},ss={for:"password",class:"mb-4"},es={for:"confirmPassword",class:"mb-4"},os={key:0,class:"text-sm mb-4"},ts=["innerHTML"],ns={class:"flex items-center justify-center gap-4 mt-4 text-lg"},as={class:"my-8 text-center cursor-pointer"},rs=R({__name:"ResetPassword",setup(P){const{t:a}=j(),i=H(),r=z(),{viewer:x,resetPasswordWithKey:T,loginUser:C}=A(),u=d(""),_=d(""),f=d(""),y=d(!1),g=d(!1);!r.query.key&&!r.query.login&&i.push("/my-account?action=forgotPassword");const E=async()=>{try{if(f.value="",g.value=!1,y.value=!0,u.value!==_.value)throw new Error(a("messages.error.passwordMismatch"));const e={key:r.query.key,login:r.query.login,password:u.value};if(!e.key||!e.login)throw g.value=!0,new Error(a("messages.error.invalidPasswordResetLink"));const s=await T(e);if(!s.success)throw g.value=!0,new Error(s.error);if(x.value){const p=await C({username:e.login,password:e.password});if(!p.success)throw new Error(p.error)}i.push("/my-account")}catch(e){f.value=e.message||a("messages.error.general")}finally{y.value=!1}};return G({title:a("messages.account.resetPassword")}),(e,s)=>{const p=Q,L=W,$=I,M=O;return t(),m("div",X,[o("div",Y,[n(p,{class:"mb-6 scale-125"}),o("h1",Z,l(e.$t("messages.account.resetPassword")),1)]),o("form",{class:"mt-6 flex flex-col",onSubmit:D(E,["prevent"])},[o("label",ss,[w(l(e.$t("messages.account.newPassword"))+" ",1),s[2]||(s[2]=o("span",{class:"text-red-500"},"*",-1)),s[3]||(s[3]=o("br",null,null,-1)),n(L,{id:"password",className:" border rounded-lg w-full p-3 px-4 bg-white",modelValue:c(u),"onUpdate:modelValue":s[0]||(s[0]=h=>N(u)?u.value=h:null),placeholder:"New Password",required:!0},null,8,["modelValue"])]),o("label",es,[w(l(e.$t("messages.account.confirmNewPassword"))+" ",1),s[4]||(s[4]=o("span",{class:"text-red-500"},"*",-1)),s[5]||(s[5]=o("br",null,null,-1)),n(L,{id:"confirmPassword",className:"border rounded-lg w-full p-3 px-4 bg-white",modelValue:c(_),"onUpdate:modelValue":s[1]||(s[1]=h=>N(_)?_.value=h:null),placeholder:"Confirm Password",required:!0},null,8,["modelValue"])]),n(K,{name:"scale-y",mode:"out-in"},{default:v(()=>[c(f)?(t(),m("div",os,[o("span",{class:"text-red-500",innerHTML:c(f)},null,8,ts),c(g)?(t(),k($,{key:0,class:"underline cursor-pointer pl-1",to:"/my-account?action=forgotPassword"},{default:v(()=>[w(l(e.$t("messages.account.requestNewLink")),1)]),_:1})):b("",!0)])):b("",!0)]),_:1}),o("button",ns,[c(y)?(t(),k(M,{key:0,stroke:"4",size:"16",color:"#fff"})):b("",!0),o("span",null,l(e.$t("messages.account.resetPassword")),1)])],32),o("div",as,[n($,{to:"/my-account"},{default:v(()=>[w(l(e.$t("messages.account.backToLogin")),1)]),_:1})])])}}}),ls=q(rs,[["__scopeId","data-v-66e5ed8b"]]),cs={},is={class:"container min-h-[600px]"};function us(P,a){const i=ls;return t(),m("div",is,[n(i)])}const _s=q(cs,[["render",us]]);export{_s as default};
